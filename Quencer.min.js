/*
 Quencer v0.1 - Image Sequencer for Javascript
 By: Dansl.net
*/
function Quencer(a,b,d,e,f,g,h){this.container;this.interval;this.frameWidth=d;this.frameHeight=e;this.totalFrames=f;this.currentFrame=0;this.speed=g;this._listeners={};this.imagePrefix=a;this.stopped=this.cached=!1;this.format=b;this.container=document.createElement("div");this.container.style.width=this.frameWidth+"px";this.container.style.height=this.frameHeight+"px";this.container.className=h}
Quencer.prototype.CacheEm=function(){this.cached=!0;for(var a=[],b=1;b<this.totalFrames;b++)a[b]=new Image,a[b].src=10>b?this.imagePrefix+"0"+b+this.format:this.imagePrefix+b+this.format};
Quencer.prototype.RunAni=function(a,b,d){function e(){if(!1==c.stopped){var a=c.currentFrame;c.container.style.backgroundImage=10>a?"url('"+c.imagePrefix+"0"+a+c.format+"')":"url('"+c.imagePrefix+a+c.format+"')";c.container.style.width=c.frameWidth+"px";c.container.style.height=c.frameHeight+"px";if(c.currentFrame==h)if(f)c.currentFrame=g;else{c.fireEvent("complete");return}c.currentFrame++;this.interval=setTimeout(e,c.speed)}}var f="undefined"!=typeof a?a:!1,g="undefined"!=typeof b?b:0,h="undefined"!=
typeof d?d:this.totalFrames,c=this;this.currentFrame=g;!1==this.cached&&this.CacheEm();this.interval=setTimeout(e,this.speed);this.stopped=!1};Quencer.prototype.Stop=function(){this.stopped=!0;clearInterval(this.interval)};Quencer.prototype.AddTo=function(a){a.appendChild(this.container)};Quencer.prototype.addEventListener=function(a,b){"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]);this._listeners[a].push(b)};
Quencer.prototype.fireEvent=function(a){"string"==typeof a&&(a={type:a});a.target||(a.target=this);if(!a.type)throw Error("Event object missing 'type' property.");if(this._listeners[a.type]instanceof Array)for(var b=this._listeners[a.type],d=0,e=b.length;d<e;d++)b[d].call(this,a)};Quencer.prototype.removeEventListener=function(a,b){if(this._listeners[a]instanceof Array)for(var d=this._listeners[a],e=0,f=d.length;e<f;e++)if(d[e]===b){d.splice(e,1);break}};